<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ecuaciones Diferenciales</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- MathJax (versión simplificada sin polyfill) -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
    <div class="container">
      <a class="navbar-brand" href="#">Ecuaciones Diferenciales</a>
      <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#" data-section="inicio">Inicio</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-section="exponencial">Exponencial</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-section="logistica">Logística</a></li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="laplaceDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Laplace
            </a>
            <ul class="dropdown-menu" aria-labelledby="laplaceDropdown">
          <li><a class="dropdown-item" href="#" data-section="exponencial-nuevo">Ecuacion poblacional exponencial</a></li>
          <li><a class="dropdown-item" href="#" data-section="logistica-nuevo">Ecuacion poblacional Logistica</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Contenido -->
  <main class="container py-5">
    <!-- INICIO -->
    <section id="inicio">
      <div class="card shadow-sm">
      <div class="card-body card-body-text">
           <h2 class="text-primary">¿Qué es una ecuación diferencial?</h2>
          <p>Una <strong>ecuación diferencial</strong> es una ecuación que involucra derivadas de una función desconocida respecto a una o más variables independientes. Formalmente, una ecuación diferencial puede expresarse como:</p>
          <p class="text-center">$$ F\left(x, y, y', y'', \ldots, y^{(n)}\right) = 0 $$</p>
          <p>Donde \( y^{(n)} \) representa la derivada de orden \( n \) de la función \( y \) respecto a \( x \).</p>

      <h4>Ejemplos de ecuaciones diferenciales:</h4>
      <ul>
        <li>Ecuación diferencial de primer orden: \( \frac{dy}{dx} + y = x \)</li>
        <li>Ecuación diferencial de segundo orden: \( \frac{d^2y}{dx^2} - 3\frac{dy}{dx} + 2y = 0 \)</li>
      </ul>

      <h4>Clasificación:</h4>
      <p>Las ecuaciones diferenciales se pueden clasificar según varios criterios importantes:</p>
      <ul>
        <li><strong>Orden:</strong> El orden es el grado de la derivada más alta presente en la ecuación. Por ejemplo, una ecuación con \( \frac{d^2y}{dx^2} \) es de segundo orden.</li>
        <li><strong>Linealidad:</strong> Una ecuación es lineal si la función desconocida y sus derivadas aparecen en forma lineal, es decir, no están elevadas a potencias ni multiplicadas entre sí. Por ejemplo, \( \frac{dy}{dx} + y = x \) es lineal, mientras que \( \frac{dy}{dx} = y^2 \) no lo es.</li>
        <li><strong>Homogeneidad:</strong> Una ecuación es homogénea si todos los términos contienen la función desconocida o sus derivadas; si hay términos independientes, es no homogénea. Por ejemplo, \( \frac{dy}{dx} + y = 0 \) es homogénea, mientras que \( \frac{dy}{dx} + y = x \) no lo es.</li>
        <li><strong>Separabilidad:</strong> Algunas ecuaciones pueden separarse en funciones de variables independientes y dependientes, permitiendo resolverlas mediante separación de variables. Por ejemplo, \( \frac{dy}{dx} = g(x)h(y) \).</li>
        <li><strong>Exactitud:</strong> Una ecuación diferencial es exacta si puede expresarse como la derivada total de una función potencial. Esto facilita su solución mediante integración directa.</li>
      </ul>
      <p>Estas clasificaciones ayudan a determinar el método más adecuado para resolver la ecuación diferencial.</p>

      <h4>Métodos básicos de solución:</h4>
      <p>Dependiendo del tipo y orden, las ecuaciones diferenciales pueden resolverse mediante métodos analíticos como separación de variables, método de integración por factores, transformada de Laplace, entre otros.</p>

      <h4>Aplicaciones:</h4>
      <p>Las ecuaciones diferenciales son fundamentales para modelar fenómenos en física, biología, economía, ingeniería y muchas otras áreas. Por ejemplo:</p>
      <ul>
        <li>Crecimiento poblacional: \( \frac{dP}{dt} = kP \)</li>
        <li>Movimiento de partículas: \( m\frac{d^2x}{dt^2} = F \)</li>
        <li>Dinámica de enfermedades: modelos SIR</li>
      </ul>

      <h4>Ecuación poblacional básica</h4>
      <p>La ecuación poblacional básica parte de:</p>
      <p class="text-center">$$ \frac{dP}{dt} = kP $$</p>
      <p>Donde:</p>
      <ul>
        <li><strong>\( P(t) \)</strong>: representa la población en el tiempo \( t \).</li>
        <li><strong>\( \frac{dP}{dt} \)</strong>: es la tasa de cambio de la población respecto al tiempo, es decir, cómo varía la población en un instante dado.</li>
        <li><strong>\( k \)</strong>: es la constante de crecimiento o tasa proporcional, que indica la velocidad a la que crece o decrece la población.</li>
      </ul>
      <p>La tasa de cambio es proporcional al tamaño de la población. Esta suposición es válida en condiciones ideales (sin recursos limitados).</p>
    </div>
        </div>
      </div>
    </section>

    <!-- EXPONENCIAL -->
    <section id="exponencial" style="display: none;">
      <div class="card shadow-lg">
      <div class="card-body card-body-text">
          <h2 class="text-success">Modelo Exponencial Poblacional</h2>
      <p>La ecuación diferencial es:</p>
      <p class="text-center">$$ \frac{dP}{dt} = kP $$</p>
      <p>Donde:</p>
      <ul>
        <li>\( P(t) \): población en el tiempo \( t \)</li>
        <li>\( k \): constante de crecimiento</li>
      </ul>
      <p>Para resolver esta ecuación y obtener la solución general, seguimos estos pasos:</p>
      <ol>
        <li><strong>Separar variables:</strong> Reescribimos la ecuación para separar las variables \( P \) y \( t \):
          <p class="text-center">$$ \frac{1}{P} \, dP = k \, dt $$</p>
        </li>
        <li><strong>Integrar ambos lados:</strong> Integramos ambos lados de la ecuación:
          <p class="text-center">$$ \int \frac{1}{P} \, dP = \int k \, dt $$</p>
          <p>Lo que da:</p>
          <p class="text-center">$$ \ln |P| = kt + C $$</p>
        </li>
        <li><strong>Despejar \( P \):</strong> Exponenciamos ambos lados para eliminar el logaritmo:
          <p class="text-center">$$ |P| = e^{kt + C} = e^C e^{kt} $$</p>
          <p>Definimos \( P_0 = e^C \) como la constante de integración, que representa la población inicial.</p>
          <p>Por lo tanto:</p>
          <p class="text-center">$$ P(t) = P_0 e^{kt} $$</p>
        </li>
      </ol>
      <p>Para obtener \( k \), usamos dos datos: \( P(0) \) y \( P(t) \).</p>

      <!-- Formulario -->
      <form id="formExponencial" class="row g-3 mt-4">
        <div class="col-md-4">
          <label for="p0" class="form-label">Población inicial \( P(0) \)</label>
          <input type="number" class="form-control" id="p0" required>
        </div>
        <div class="col-md-4">
          <label for="t" class="form-label">Tiempo \( t \)</label>
          <input type="number" class="form-control" id="t" required>
        </div>
        <div class="col-md-4">
          <label for="pt" class="form-label">Población en \( t \) (\( P(t) \))</label>
          <input type="number" class="form-control" id="pt" required>
        </div>
        <div class="col-12">
          <button type="submit" class="btn btn-primary">Calcular modelo</button>
        </div>
      </form>

      <!-- Resultado -->
      <div id="resultadoExponencial" class="mt-5" style="display: none;">
        <h5>Resolución:</h5>
        <div id="pasosResolucion" class="mt-3"></div>

        <canvas id="graficaPoblacion" height="100"></canvas>

        <!-- Sección para consultar valor de P(t) -->
        <div class="my-4">
          <label for="tiempoConsulta" class="form-label">Consultar población para un tiempo \( t \):</label>
          <input type="number" class="form-control w-25" id="tiempoConsulta" placeholder="Ej: 10">
          <button class="btn btn-outline-primary mt-2" onclick="calcularValor()">Calcular \( P(t) \)</button>
          <p class="mt-2" id="resultadoConsulta"></p>
        </div>

        <!-- Nueva sección para ingresar valor real y calcular error -->
        <div class="my-4">
          <label for="valorRealExponencial" class="form-label">Valor real de la población en \( t \)</label>
          <input type="number" class="form-control w-25" id="valorRealExponencial" placeholder="Ej: 1500">
          <button class="btn btn-outline-danger mt-2" id="calcularErrorExponencialBtn">Calcular error</button>
          <p class="mt-2" id="resultadoErrorExponencial"></p>
        </div>
      </div>
    </div>
        </div>
      </div>
    </section>

    <!-- LOGÍSTICA -->
    <section id="logistica" style="display: none; background-color: #e0f7fa;">
      <div class="card shadow-lg">
          <div class="card-body card-body-text">
          <h2 class="text-success">Modelo Logístico Poblacional</h2>
          <p>La ecuación diferencial logística es:</p>
          <p class="text-center">$$ \frac{dP}{dt} = rP \left(1 - \frac{P}{K}\right) $$</p>
          <p>Donde:</p>
          <ul>
            <li>\( P(t) \): población en el tiempo \( t \)</li>
            <li>\( r \): tasa de crecimiento intrínseca</li>
            <li>\( K \): capacidad de carga del ambiente</li>
          </ul>
          <p>La solución general es:</p>
          <p class="text-center">$$ P(t) = \frac{K}{1 + \left(\frac{K - P_0}{P_0}\right) e^{-rt}} $$</p>

          <h4>Derivación paso a paso de la solución general:</h4>
          <ol>
            <li>Partimos de la ecuación diferencial logística:
              <p class="text-center">\( \frac{dP}{dt} = rP \left(1 - \frac{P}{K}\right) \)</p>
            </li>
            <li>Reescribimos la ecuación para separar variables:
              <p class="text-center">\( \frac{dP}{P(1 - \frac{P}{K})} = r \, dt \)</p>
            </li>
            <li>Realizamos la descomposición en fracciones parciales:
              <p class="text-center">\( \frac{1}{P(1 - \frac{P}{K})} = \frac{1}{P} + \frac{1}{K - P} \)</p>
            </li>
            <li>Integramos ambos lados:
              <p class="text-center">\( \int \left( \frac{1}{P} + \frac{1}{K - P} \right) dP = \int r \, dt \)</p>
            </li>
            <li>La integral da:
              <p class="text-center">\( \ln|P| - \ln|K - P| = rt + C \)</p>
            </li>
            <li>Reorganizamos para despejar \( P \):
              <p class="text-center">\( \ln \left| \frac{P}{K - P} \right| = rt + C \)</p>
            </li>
            <li>Exponenciamos ambos lados:
              <p class="text-center">\( \frac{P}{K - P} = Ce^{rt} \)</p>
            </li>
            <li>Despejamos \( P \):
              <p class="text-center">\( P = \frac{KCe^{rt}}{1 + Ce^{rt}} \)</p>
            </li>
            <li>Definimos la constante \( C \) en función de la condición inicial \( P(0) = P_0 \):
              <p class="text-center">\( C = \frac{P_0}{K - P_0} \)</p>
            </li>
            <li>Finalmente, obtenemos la solución general:
              <p class="text-center">\( P(t) = \frac{K}{1 + \left(\frac{K - P_0}{P_0}\right) e^{-rt}} \)</p>
            </li>
          </ol>

          <p>Para resolver el modelo, ingresa los datos a continuación:</p>
          <form id="formLogistica" class="row g-3 mt-4">
            <div class="col-md-3">
              <label for="p0Log" class="form-label">Población inicial \( P_0 \)</label>
              <input type="number" class="form-control" id="p0Log" required>
            </div>
            <div class="col-md-3">
              <label for="ptLog" class="form-label">Población en \( t \) (\( P(t) \))</label>
              <input type="number" step="any" class="form-control" id="ptLog" required>
            </div>
            <div class="col-md-3">
              <label for="kLog" class="form-label">Capacidad de carga \( K \)</label>
              <input type="number" class="form-control" id="kLog" required>
            </div>
            <div class="col-md-3">
              <label for="tLog" class="form-label">Tiempo \( t \)</label>
              <input type="number" class="form-control" id="tLog" required>
            </div>
            <div class="col-12">
              <button type="submit" class="btn btn-primary">Calcular modelo</button>
            </div>
          </form>

          <div id="resultadoLogistica" class="mt-5" style="display: none;">
            <h5>Resolución:</h5>
            <div id="pasosResolucionLog" class="mt-3"></div>
            <canvas id="graficaPoblacionLog" height="100"></canvas>
            
            <!-- Sección corregida para calcular P(t) -->
            <div class="my-4">
              <label for="tiempoConsultaLog" class="form-label">Consultar población para un tiempo \( t \):</label>
              <input type="number" class="form-control w-25" id="tiempoConsultaLog" placeholder="Ej: 10">
              <button class="btn btn-outline-primary mt-2" onclick="calcularValorLog()">Calcular \( P(t) \)</button>
              <p class="mt-2" id="resultadoConsultaLog"></p>
            </div>

            <!-- Nueva sección para ingresar valor real y calcular error -->
            <div class="my-4">
              <label for="valorRealLogistica" class="form-label">Valor real de la población en \( t \)</label>
              <input type="number" class="form-control w-25" id="valorRealLogistica" placeholder="Ej: 1500">
              <button class="btn btn-outline-danger mt-2" id="calcularErrorLogisticaBtn">Calcular error</button>
              <p class="mt-2" id="resultadoErrorLogistica"></p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- LAPLACE -->
    <section id="laplace" style="display: none;">
      <div class="card"><div class="card-body card-body-text">Laplace - en desarrollo</div></div>
    </section>
  </main>

  <!-- NUEVAS SECCIONES EN BLANCO -->
  <section id="exponencial-nuevo" style="display: none; background-color: #e0f7fa;">
    <div class="card shadow-lg">
      <div class="card-body card-body-text">
        <h2 class="text-success">Ecuacion poblacional exponencial (Nueva Sección)</h2>
        <p>Esta sera la ecuacion que tendremos que resolver, al usar la transformada de Laplace primero debemos de hacer la tranformada de la ecuacion.</p>
        <p class="text-center">
          $$ \frac{dP}{dt} = rP $$
        </p>
        <p class="text-center">
          $$ \mathcal{L} \left\{ \frac{dP}{dt} \right\} = \mathcal{L} \{ rP \} $$
        </p>
        <p class="text-center">
          $$ sP(s) - P_0 = rP(s) $$
        </p>
        <p>Bueno una vez haciendo la tranformada, procedemos a despejar P(s)</p>
        <p class="text-center">
          $$ sP(s) - P_0 = rP(s) $$
        </p>
        <p class="text-center">
          $$ sP(s) - rP(s) = P_0 $$
        </p>
        <p class="text-center">
          $$ P(s)(s - r) = P_0 $$
        </p>
        <p class="text-center">
          $$ P(s) = \frac{P_0}{s - r} $$
        </p>
        <p>Ya yna vez despejado P(s), aplicamos transformada inversa</p>
        <p class="text-center">
          $$ P(s) = \frac{P_0}{s - r} $$
        </p>
        <p class="text-center">
          $$ P(s) = \mathcal{L}^{-1} \left\{ \frac{P_0}{s - r} \right\} $$
        </p>
        <p class="text-center">
          $$ P(s) = P_0 \mathcal{L}^{-1} \left\{ \frac{1}{s - r} \right\} $$
        </p>
        <p>La Transformada Inversa de \( \mathcal{L}^{-1} \left\{ \frac{1}{s - a} \right\} \) es \( e^{at} \) por lo tanto</p>
        <p class="text-center">
          $$ P(s) = P_0 \mathcal{L}^{-1} \left\{ \frac{1}{s - r} \right\} $$
        </p>
        <p class="text-center">
          $$ P(t) = P_0 e^{rt} $$
        </p>

        <!-- Formulario para P0 y r -->
        <form id="formExponencialNuevo" class="row g-3 mt-4">
          <div class="col-md-6">
            <label for="p0Nuevo" class="form-label">Población inicial \( P(0) \)</label>
            <input type="number" class="form-control" id="p0Nuevo" required min="0" step="any" />
          </div>
          <div class="col-md-6">
            <label for="rNuevo" class="form-label">Tasa de crecimiento \( r \)</label>
            <input type="number" class="form-control" id="rNuevo" required step="any" />
          </div>
          <div class="col-12">
            <button type="submit" class="btn btn-primary">Calcular modelo</button>
          </div>
        </form>

        <!-- Resultado -->
        <div id="resultadoExponencialNuevo" class="mt-4" style="display: none;">
          <h5>Resolución:</h5>
          <div id="pasosResolucionNuevo" class="mt-3"></div>
          <canvas id="graficaPoblacionNuevo" height="100"></canvas>

          <!-- Sección para consultar valor de P(t) -->
          <div class="my-4">
            <label for="tiempoConsultaNuevo" class="form-label">Consultar población para un tiempo \( t \):</label>
            <input type="number" class="form-control w-25" id="tiempoConsultaNuevo" placeholder="Ej: 10" min="0" step="any" />
            <button class="btn btn-outline-primary mt-2" onclick="calcularValorNuevo()">Calcular \( P(t) \)</button>
            <p class="mt-2" id="resultadoConsultaNuevo"></p>
          </div>
          <!-- Nueva sección para ingresar valor real y calcular error -->
          <div class="my-4">
            <label for="valorRealExponencialNuevo" class="form-label">Valor real de la población en \( t \)</label>
            <input type="number" class="form-control w-25" id="valorRealExponencialNuevo" placeholder="Ej: 1500" />
            <button class="btn btn-outline-danger mt-2" id="calcularErrorExponencialNuevoBtn">Calcular error</button>
            <p class="mt-2" id="resultadoErrorExponencialNuevo"></p>
          </div>

        </div>
      </div>
    </div>
  </section>

  <section id="logistica-nuevo" style="display: none; background-color: #f8f9fa;">
    <div class="card shadow-lg">
      <div class="card-body card-body-text">
        <h2 class="text-primary">Ecuación poblacional Logística (Nueva Sección)</h2>
        <p>Bueno ahora tenemos una ecuación logística no lineal, y queremos resolverla usando transformada de Laplace. Como la transformada se aplica a ecuaciones lineales, primero debemos linealizarla con un cambio de variable.</p>
        <p class="text-center">
          $$ \frac{\textrm{dP}}{\textrm{dt}} = \textrm{rP} \left(1 - \frac{P}{K}\right), \quad P(0) = P_0 $$
        </p>
        <p>Lo primero que haremos es expandir la ecuación</p>
        <p class="text-center">
          $$ \frac{\textrm{dP}}{\textrm{dt}} = \textrm{rP} - \frac{r}{K} P^2 $$
        </p>
        <p>Es una ecuación no lineal, y resolverla directamente con Laplace no es viable. Por eso hacemos un cambio de variable.</p>
        <p class="text-center">
          $$ \begin{array}{l} u = P^{2-3} = P^{-1} \\ u = \frac{1}{P} \\ P = \frac{1}{u} \end{array} $$
        </p>
        <p>Con esta sustitución ahora vamos a escribir la E.D en términos de \( u \):</p>
        <p class="text-center">
          $$ \begin{array}{l} u = P^{-1} \\ \frac{\textrm{du}}{\textrm{dt}} = -P^{-2} * \frac{\textrm{dP}}{\textrm{dt}} \\ \frac{\textrm{du}}{\textrm{dt}} = -\frac{1}{P^2} * \frac{\textrm{dP}}{\textrm{dt}} \\ -P^2 = \frac{\textrm{du}}{\textrm{dt}} = \frac{\textrm{dP}}{\textrm{dt}} \end{array} $$
        </p>
        <p>Luego escribimos la E.D logística como</p>
        <p class="text-center">
          $$ \begin{array}{l} \frac{\textrm{dP}}{\textrm{dt}} = \textrm{rP} - \frac{r}{K} P^2 \\ -P^2 \frac{\textrm{du}}{\textrm{dt}} = \textrm{rP} - \frac{r}{K} P^2 \end{array} $$
        </p>
        <p>Ahora reemplazamos todas las \( P \) por la sustitución inicial</p>
        <p class="text-center">
          $$ \begin{array}{l} P = \frac{1}{u} \\ -\left(\frac{1}{u^2}\right) \frac{\textrm{du}}{\textrm{dt}} = r \left(\frac{1}{u}\right) - \frac{r \left(\frac{1}{u^2}\right)}{K} \\ -\left(\frac{1}{u^2}\right) \frac{\textrm{du}}{\textrm{dt}} = \frac{r}{u} - \frac{r}{K u^2} \end{array} $$
        </p>
        <p>Ahora con esto pasamos el \( u^2 \) que está dividiendo a la izquierda a multiplicar a la derecha.</p>
        <p class="text-center">
          $$ -\frac{\textrm{du}}{\textrm{dt}} = \frac{r u^2}{u} - \frac{r u^2}{K u^2} $$
        </p>
        <p>Simplificamos la ecuación</p>
        <p class="text-center">
          $$ -\frac{\textrm{du}}{\textrm{dt}} = r u - \frac{r}{K} $$
        </p>
        <p>Pasamos el \( r u \) al otro lado</p>
        <p class="text-center">
          $$ -\frac{\textrm{du}}{\textrm{dt}} - r u = -\frac{r}{K} $$
        </p>
        <p>Y ahora para dejar la derivada positiva multiplicamos todo por -1</p>
        <p class="text-center">
          $$ \frac{\textrm{du}}{\textrm{dt}} + r u = \frac{r}{K} $$
        </p>
        <p>Ahora tenemos la ecuación lineal perfecta para resolver por Laplace, así que aplicamos transformada de Laplace</p>
        <p class="text-center">
          $$ \begin{array}{l} L \left\{ \frac{\textrm{dU}}{\textrm{dt}} + r U \right\} = L \left\{ \frac{r}{K} \right\} \\ s U(s) - U(0) + r U(s) = \frac{r}{K} * \frac{1}{s} \end{array} $$
        </p>
        <p>Si la condición inicial es \( P(0) = P_0 \), entonces podemos reescribirla como \( U(0) = \frac{1}{P_0} \)</p>
        <p>Con esto podemos reescribir la ecuación.</p>
        <p class="text-center">
          $$ \begin{array}{l} s U(s) - U(0) + r U(s) = \frac{r}{K} * \frac{1}{s} \\ s U(s) - \frac{1}{P_0} + r U(s) = \frac{r}{K} * \frac{1}{s} \end{array} $$
        </p>
        <p>Ahora simplificamos la ecuación</p>
        <p class="text-center">
          $$ \begin{array}{l} s U(s) - \frac{1}{P_0} + r U(s) = \frac{r}{K} * \frac{1}{s} \\ s U(s) + r U(s) = \frac{1}{P_0} + \frac{r}{K} * \frac{1}{s} \\ (s + r) U(s) = \frac{1}{P_0} + \frac{r}{K} * \frac{1}{s} \end{array} $$
        </p>
        <p>Ahora con la ecuación despejamos \( U(s) \)</p>
        <p class="text-center">
          $$ U(s) = \frac{1}{P_0 (s + r)} + \frac{r}{K} * \frac{1}{s (s + r)} $$
        </p>
        <p>Aplicamos transformada inversa</p>
        <p class="text-center">
          $$ \begin{array}{l} U(s) = L^{-1} \left\{ \frac{1}{P_0 (s + r)} \right\} + \frac{r}{K} L^{-1} \left\{ \frac{1}{s (s + r)} \right\} \\ U(s) = \frac{1}{P_0} L^{-1} \left\{ \frac{1}{s + r} \right\} + \frac{r}{K} L^{-1} \left\{ \frac{1}{s (s + r)} \right\} \\ U(s) = \frac{1}{P_0} e^{-r t} + \frac{r}{K} L^{-1} \left\{ \frac{1}{s (s + r)} \right\} \end{array} $$
        </p>
        <p>Como podemos ver la segunda derivada no se halla en alguna tabla de transformada inversa por lo tanto usamos fracciones parciales</p>
        <p class="text-center">
          $$ \frac{1}{s (s + r)} $$
        </p>
        <p>Multiplicamos en ambos lados por \( s (s + r) \)</p>
        <p class="text-center">
          $$ \begin{array}{l} \frac{s (s + r)}{s (s + r)} = \frac{A s (s + r)}{s} + \frac{B s (s + r)}{s + r} \\ 1 = A (s + r) + B s \end{array} $$
        </p>
        <p>Agrupamos términos</p>
        <p class="text-center">
          $$ \begin{array}{l} 1 = A (s + r) + B s \\ 1 = A s + A r + B s \\ 1 = (A + B) s + A r \end{array} $$
        </p>
        <p>Igualamos coeficientes</p>
        <p class="text-center">
          $$ \begin{array}{l} A + B = 0 \\ A r = 1 \end{array} $$
        </p>
        <p>Por lo tanto despejando</p>
        <p class="text-center">
          $$ \begin{array}{l} A = \frac{1}{r} \\ A + B = 0 \\ \frac{1}{r} + B = 0 \\ B = -\frac{1}{r} \end{array} $$
        </p>
        <p>Así que ahora sabemos que</p>
        <p class="text-center">
          $$ \begin{array}{l} L^{-1} \left\{ \frac{1}{s} \right\} = 1 \\ L^{-1} \left\{ \frac{1}{s + r} \right\} = e^{-r t} \end{array} $$
        </p>
        <p>Entonces ahora escribimos</p>
        <p class="text-center">
          $$ L^{-1} \left\{ \frac{1}{s (s + r)} \right\} = \frac{1}{r} L^{-1} \left\{ \frac{1}{s} \right\} - \frac{1}{r} L^{-1} \left\{ \frac{1}{s + r} \right\} = \frac{1}{r} (1 - e^{-r t}) $$
        </p>
        <p>Eso lo podemos escribir como</p>
        <p class="text-center">
          $$ \frac{1 - e^{-r t}}{r} $$
        </p>
        <p>Por lo tanto ahora podemos reemplazar</p>
        <p class="text-center">
          $$ \begin{array}{l} U(t) = \frac{1}{P_0} e^{-r t} + \frac{r}{K} * \frac{1 - e^{-r t}}{r} \\ U(t) = \frac{1}{P_0} e^{-r t} + \frac{1 - e^{-r t}}{K} \end{array} $$
        </p>
        <p>Procedemos a sumar las fracciones para simplificar lo más posible la ecuación, queremos expresar la suma como una sola fracción, el mínimo común denominador es \( P_0 K \), así que</p>
        <p class="text-center">
          $$ U(t) = \frac{K e^{-r t}}{P_0 K} + \frac{P_0 (1 - e^{-r t})}{P_0 K} $$
        </p>
        <p>Sumamos los denominadores</p>
        <p class="text-center">
          $$ U(t) = \frac{K e^{-r t} + P_0 (1 - e^{-r t})}{P_0 K} $$
        </p>
        <p>Expandimos</p>
        <p class="text-center">
          $$ U(t) = \frac{K e^{-r t} + P_0 - P_0 e^{-r t}}{P_0 K} $$
        </p>
        <p>Simplificamos el denominador</p>
        <p class="text-center">
          $$ U(t) = \frac{(K + P_0) e^{-r t} + P_0}{P_0 K} $$
        </p>
        <p>Ahora recordemos la condición inicial</p>
        <p class="text-center">
          $$ U = \frac{1}{P} $$
        </p>
        <p>Al despejar \( P \) tenemos</p>
        <p class="text-center">
          $$ P(t) = \frac{1}{U(t)} = \frac{P_0 K}{(K - P_0) e^{-r t} + P_0} $$
        </p>
        <p>Dividimos tanto numerador como denominador por \( P_0 \)</p>
        <p class="text-center">
          $$ \frac{\frac{P_0 K}{P_0}}{\frac{(K - P_0) e^{-r t}}{P_0} + \frac{P_0}{P_0}} $$
        </p>
        <p>Simplificando la ecuación quedaría</p>
        <p class="text-center">
          $$ P(t) = \frac{K}{\left(\frac{K - P_0}{P_0}\right) e^{-r t} + 1} $$
        </p>

        <!-- Formulario para P0, r, K, t -->
        <form id="formLogisticaNuevo" class="row g-3 mt-4">
          <div class="col-md-4">
            <label for="p0NuevoLog" class="form-label">Población inicial \( P_0 \)</label>
            <input type="number" class="form-control" id="p0NuevoLog" required min="0" step="any" />
          </div>
          <div class="col-md-4">
            <label for="rNuevoLog" class="form-label">Tasa de crecimiento \( r \)</label>
            <input type="number" class="form-control" id="rNuevoLog" required step="any" />
          </div>
          <div class="col-md-4">
            <label for="kNuevoLog" class="form-label">Capacidad de carga \( K \)</label>
            <input type="number" class="form-control" id="kNuevoLog" required step="any" />
          </div>
          <div class="col-12">
            <button type="submit" class="btn btn-primary">Calcular modelo</button>
          </div>
        </form>

        <!-- Resultado -->
        <div id="resultadoLogisticaNuevo" class="mt-4" style="display: none;">
          <h5>Resolución:</h5>
          <div id="pasosResolucionNuevoLog" class="mt-3"></div>
          <canvas id="graficaPoblacionNuevoLog" height="100"></canvas>

          <!-- Sección para consultar valor de P(t) -->
          <div class="my-4">
            <label for="tiempoConsultaNuevoLog" class="form-label">Consultar población para un tiempo \( t \):</label>
            <input type="number" class="form-control w-25" id="tiempoConsultaNuevoLog" placeholder="Ej: 10" min="0" step="any" />
            <button class="btn btn-outline-primary mt-2" onclick="calcularValorNuevoLog()">Calcular \( P(t) \)</button>
            <p class="mt-2" id="resultadoConsultaNuevoLog"></p>
          </div>

          <!-- Nueva sección para ingresar valor real y calcular error -->
          <div class="my-4">
            <label for="valorRealNuevoLog" class="form-label">Valor real de la población en \( t \)</label>
            <input type="number" class="form-control w-25" id="valorRealNuevoLog" placeholder="Ej: 1500" />
            <button class="btn btn-outline-danger mt-2" id="calcularErrorNuevoLogBtn">Calcular error</button>
            <p class="mt-2" id="resultadoErrorNuevoLog"></p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Main JS (debes actualizar tu archivo main.js con las correcciones anteriores) -->
  <script src="js/main.js"></script>

</body>
</html>
